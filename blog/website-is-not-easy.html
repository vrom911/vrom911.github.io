<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Website is not easy</title>
    <!-- Favicon -->
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
    <meta name="description" content="I decided to dedicate the very first post of my blog to the process of its creation.">
    <meta name="keywords" content="Haskell, Functional progarmming, FP, haskell, web, hakyll, processing">
    <meta name="author" content="Veronika Romashkina" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Twitter cards -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@vrom911" />
    <meta property="twitter:title" content="vrom911 - Website is not easy" />
    <meta name="twitter:description" content="I decided to dedicate the very first post of my blog to the process of its creation." />
    <meta name="twitter:image:src" content="https://vrom911.github.io/images/logo.png" />
    <meta property="og:title" content="Website is not easy" />
    <meta property="og:description" content="I decided to dedicate the very first post of my blog to the process of its creation." />
    <meta property="og:site_name" content="vrom911" />
    <meta property="og:image" content="https://vrom911.github.io/images/logo.png" />

    <!-- Font -->
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <!-- Custom styles for this template -->
    <link rel="stylesheet" href="../css/highlight-theme.css" />
    <link rel="stylesheet" href="../css/default.css">
    <link rel="stylesheet" href="../css/post.css">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-135683915-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-135683915-1');
        </script>

  </head>
  <body class="body-posts">
    <!-- Header -->
    <nav class="navbar navbar-inverse navbar-fixed-right bg-primary text-secondary">
      <div class="navbar-header row">
          <div class="postslogo"> <a class="navbar-brand" href="../"><img class="img-fluid" src="../images/logo.png" alt="vrom911"></a></div>
          <h5 class="text-center"><a href="../blog"> vrom911 Blog</a></h5>
          <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/brands.css" integrity="sha384-BKw0P+CQz9xmby+uplDwp82Py8x1xtYPK3ORn/ZSoe6Dk3ETP59WCDnX+fI1XCKK" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/fontawesome.css" integrity="sha384-4aon80D8rXCGx9ayDt85LbyUHeMWd3UiBaWliBlJ53yzm9hqN21A+o1pqoyK04h+" crossorigin="anonymous">
<ul class="list-inline mb-0">

    <li class="list-inline-item">
        <a class="btn btn-outline-light btn-social text-center rounded-circle" href="https://twitter.com/vrom911" target="_blank">
            <i class="fab fa-twitter"></i>
       </a>
    </li>

    <li class="list-inline-item">
        <a class="btn btn-outline-light btn-social text-center rounded-circle" href="https://github.com/vrom911" target="_blank">
            <i class="fab fa-github"></i>
       </a>
    </li>

    <li class="list-inline-item">
        <a class="btn btn-outline-light btn-social text-center rounded-circle" href="https://www.linkedin.com/in/veronikaromashkina/" target="_blank">
            <i class="fab fa-linkedin"></i>
       </a>
    </li>

</ul>

      </div>
      <div class="toc-zone">
          <h6 class="text-white text-center">Contents</h6>
          <div class="toc" id="main"> <ul>
<li><a href="#quick-history">Quick history</a></li>
<li><a href="#tools">Tools</a>
<ul>
<li><a href="#haskell">Haskell</a></li>
<li><a href="#htmlcssjs">HTML/CSS/JS</a></li>
<li><a href="#processing">Processing</a></li>
<li><a href="#github-deployment">Github deployment</a></li>
</ul></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul> </div>
      </div>
    </nav>
    <section class="container info">
        <h2 class="text-center text-uppercase text-purple">Website is not easy</h2>
        <div class="text-center">March  6, 2019</div>
        <div class="row tag-block text-center">
          <div class="col-12 tag-block">
            
            <span> <a class="btn btn-outline-dark btn-tag" href="../tags/haskell">haskell</a></span>
            
            <span> <a class="btn btn-outline-dark btn-tag" href="../tags/web">web</a></span>
            
            <span> <a class="btn btn-outline-dark btn-tag" href="../tags/hakyll">hakyll</a></span>
            
            <span> <a class="btn btn-outline-dark btn-tag" href="../tags/processing">processing</a></span>
            
          </div>
        </div>
        <div class="content">
          <div class="row post">
            <div class="col-12 post-body"> <p class="lead"> <p>I decided to dedicate the very first post of my blog to the process of its creation. I am going to briefly walk you through the different aspects of website development. Based on my own experience, I am going to show how I put together different languages, tools, concepts, paradigms and how to overcome the frustration working on the website when you’re a backend developer, but you want your page to be fancy and semantically correct from all web points of view.</p>
<p>This website is hosted at <a href="https://pages.github.com/">Github pages</a>. Its content is generated with the help of the <a href="https://jaspervdj.be/hakyll/"><code>Hakyll</code></a> templating framework written in <a href="https://www.haskell.org/">Haskell</a>. I’m using <a href="https://processing.org/">Processing</a> language for the images and art illustrations. And, standard pack of <code>HTML</code> + <code>CSS</code> + a bit of custom <code>JS</code>. You can find the code itself here:</p>
<ul>
<li><a href="https://github.com/vrom911/vrom911.github.io">Website sources</a></li>
</ul>
<h2 id="quick-history">Quick history</h2>
<p>I had a plan about having my own hand-made, custom and fancy website as any decent web developer (as I thought back then!). And the fundamental motive of this was my dream to create everything by myself from scratch, starting with the colour palette sketch, images, CSS responsive grid framework (I gave up this idea, of course) and finishing with the deployment mechanisms. The purpose of doing everything in this particular way was to get as much knowledge as possible from this process and, to be honest, I enjoyed learning every part the hard way.</p>
<p>I started the work in far 2014 where I was studying a lot of frontend techniques via courses, articles and other online resources. Among the courses, I would like to highlight a few interesting ones: HTML5 concepts and best practices and also very impressive but not very common about <a href="https://www.edx.org/course/information-communication-technology-ict-gtx-ict100x-0">Information and Communication Technology (ICT) Accessibility</a>. I was absolutely happy to find out all that concepts that make the website building processes more strict and semantically correct which surely could be beneficial for all the internet users if only all developers create “correct” websites. Hmm, interesting, now I am starting to think that even back then I liked the type-safety even not knowing about functional languages. Anyway, I abandoned the project in the middle as I got the job (not as the programmer) and only got back to finishing the website this month.</p>
<p>Beyond doubt, at this point, it’s not perfect in both design and semantical meaning, but at least I have my own cosy corner on the internet which I created by myself. So, do not judge me too hard.</p>
<h2 id="tools">Tools</h2>
<p>Here I am going to tell more about each component of the website to show how it all shaping up into the bigger picture.</p>
<h3 id="haskell">Haskell</h3>
<p>Haskell has a very convenient library for static websites generation — <a href="https://jaspervdj.be/hakyll/"><code>Hakyll</code></a>. In simple words, it is the web templating engine (similar to <a href="https://jekyllrb.com/">Jekyll</a>) based on <a href="https://pandoc.org/"><code>pandoc</code></a> which is a universal file converter. This is an important point as it gives us a lot of flexibility with the formats to use. Moreover, it allows us to write our own preprocessors for the content in a straightforward way. I already have experience in implementing websites with Hakyll — check out <a href="https://kowainik.github.io"><code>Kowainik</code></a> page, where I put a lot of efforts into its creation.</p>
<p>Hakyll is used to establish the rules of combining different pieces of the webpage together. Here is what I mean, with rules you can say how you would like the routes to be transformed, how to compile CSS files, what extensions of the files you what them to be translated to, how to apply different templates together etc.</p>
<p>Blog posts are written in markdown. Since <code>pandoc</code> supports the document’s metadata, Hakyll heavily uses it for generating web pages from the <code>md</code> format. For example, the date of the blog post creation is stored inside the markdown file name and can be used in the blog post context as <code>$date$</code> variable. In the same manner, you can add your own contexts which will include some important information for each piece. Tags for blog posts are created using this feature. As the bonus <code>pandoc</code> provides us with the Table of Contents context as well.</p>
<p>Contexts are very powerful in Hakyll, they help you to write less boilerplate. I am going to demonstrate it in a small example. Let’s say you want to display the list of all your favourite movies on the page. You can just create the list by hands in your HTML file:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="kw">&lt;section</span><span class="ot"> class=</span><span class="st">”film</span><span class="ot"> row</span><span class="er">”</span><span class="kw">&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a>    <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">”col-3”</span><span class="kw">&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a>         <span class="kw">&lt;img</span><span class="ot"> src=</span><span class="st">”/images/film1.png”</span><span class="ot"> alt=</span><span class="st">”Film</span> <span class="er">1”</span><span class="kw">&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a>    <span class="kw">&lt;/div&gt;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>    <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">”col-9”</span><span class="kw">&gt;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a>        <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">”https://my-favourite-film.com/1</span><span class="kw">&gt;</span>Film 1<span class="kw">&lt;/a&gt;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a>    <span class="kw">&lt;/div&gt;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a><span class="kw">&lt;/section&gt;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a><span class="kw">&lt;section</span><span class="ot"> class=</span><span class="st">”film</span><span class="ot"> row</span><span class="er">”</span><span class="kw">&gt;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a>    <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">”col-3”</span><span class="kw">&gt;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a>         <span class="kw">&lt;img</span><span class="ot"> src=</span><span class="st">”/images/film2.png”</span><span class="ot"> alt=</span><span class="st">”Film</span> <span class="er">2”</span><span class="kw">&gt;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a>    <span class="kw">&lt;/div&gt;</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a>    <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">”col-9”</span><span class="kw">&gt;</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true"></a>        <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">”https://my-favourite-film.com/1</span><span class="kw">&gt;</span>Film 2<span class="kw">&lt;/a&gt;</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true"></a>    <span class="kw">&lt;/div&gt;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true"></a><span class="kw">&lt;section&gt;</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true"></a>    ...</span></code></pre></div>
<p>This list can be very boring to fill in, most probably you’d copy the previous section and change some names and links when you want to add another entry. This is not interesting. And the refactoring is not easy when you need to change style — you need to change the same part in every element manually. But with Hakyll you can write:</p>
<pre><code> $for(myFilms)$
      &lt;section class=”film row”&gt;
        &lt;div class=”col-3”&gt;
            &lt;img src=”/images/$filmImage$.png” alt=”$filmName$”&gt;
        &lt;/div&gt;
        &lt;div class=”col-9”&gt;
            &lt;a href=”https://my-favourite-film.com/$filmLink$&gt;$filmName$&lt;/a&gt;
        &lt;/div&gt;
    &lt;/section&gt;
$endfor$
</code></pre>
<p>It feels better. And this is not difficult to achieve. You can create the data type with the necessary fields, create the list of the elements of this type and using <a href="http://hackage.haskell.org/package/hakyll-4.12.5.0/docs/Hakyll-Web-Template-Context.html#v:listField"><code>listField</code></a> function from the <code>Hakyll</code> create the context. See the actual example from my website source code:</p>
<ul>
<li><a href="https://github.com/vrom911/vrom911.github.io/blob/develop/src/Website/Experience.hs">Experience Context</a></li>
</ul>
<p>There are a lot of other interesting elements of the Hakyll and Pandoc, probably I will cover the most useful tricks I know later in some dedicated blog posts. For the moment I just want to highlight, that this combination is a very powerful tool of the static website projects, and I would strongly advise to give it a shot when you decide to create your own page or blog. Feel free to reach out to meif you have any questions about aiming anything with Hakyll.</p>
<h3 id="htmlcssjs">HTML/CSS/JS</h3>
<p>This is one of the hardest parts of the project for me, as it requires a lot of time for creating and implementing every page view.</p>
<p>I’ll start with the additional frameworks that are used for the project:</p>
<ul>
<li><a href="https://getbootstrap.com/"><code>bootstrap-4.0</code></a> – for CSS</li>
<li><a href="https://fontawesome.com/"><code>font awesome</code></a> – for icons</li>
<li><a href="https://highlightjs.org/"><code>highlight.js</code></a> – for syntax highlighting (though I created the code theme by my own).</li>
<li><a href="https://jquery.com/"><code>jquery</code></a> – for some page scrolling effects</li>
<li><a href="http://processingjs.org/"><code>processing.js</code></a> – for Processing visual elements (See more details in the following section)</li>
</ul>
<p>As I am not proficient with HTML and CSS I find its syntax very excess. I would rather write it all with some <a href="http://fvisser.nl/clay/">Haskell</a> <a href="http://hackage.haskell.org/package/lucid">DSL</a> <a href="https://jaspervdj.be/blaze/">written for these purposes</a>, but in this case, I would lose the ability of on-the-fly page update and result refresh, as Haskell should be recompiled each time I make a small typo fix in the page, or change the font size in the CSS. I also could even write it in Elm, but it is a bit overengineering for a static website. And as a bonus, Hakyll has <a href="http://hackage.haskell.org/package/hakyll-sass">integration</a> for SASS/LESS/SCSS preprocessors that also work on-the-fly.</p>
<p>As I mentioned before I’m heavily using the <code>pandoc</code>’s templating system to move out the similar parts in HTML files, as well as metadata and contexts to reduce the need for HTML boilerplate creation.</p>
<h3 id="processing">Processing</h3>
<p>Probably you noticed the animated navigation buttons, or some small arts, or at least logo at this website – well, this all is done with <a href="https://processing.org/">Processing</a>. Processing is the language for the generative art creation. I am not going to talk a lot about its features or any other implementation details, there are plenty of materials, books, examples with crazy stuff done via Processing.</p>
<p>If you check the project structure you can see <code>pde</code> folder – these are all files I’m using to show animations and arts on the page. In order to make drawing compatible with the HTML pages, I’m using <a href="http://processingjs.org/"><code>ProcessingJS</code></a> which provides the integration of the <code>.pde</code> files with the modern web interface. It uses <code>canvas</code> elements to visualize Processing code on the page.</p>
<p>You can wonder how I came up with this Processing stuff. I’m not an artist neither I am a person with a great design taste, but I really enjoy patterns. I could look at them for hours. All these interweaving lines and elegant figures fascinate me. So I decided to give a shot to the Processing course a long time ago. The language is very straightforward to create the patterns, but I must mention, that it’s not that simple. Looking very simple, the piece of the pattern can lead to difficult math calculations. For example, I needed to use <a href="https://en.wikipedia.org/wiki/B%C3%A9zier_curve">Bézier curve</a> definitions to create some elements on my webpage.</p>
<p>Here is just a random example of the generated art:</p>
<figure>
<img src="https://user-images.githubusercontent.com/8126674/53868247-9a216b00-4030-11e9-80fb-995fb5fa7b27.png" alt="Processing Pattern" /><figcaption aria-hidden="true">Processing Pattern</figcaption>
</figure>
<h3 id="github-deployment">Github deployment</h3>
<p>I admire GitHub for giving us the ability to deploy personal static websites so easily. This reduced the required number of actions for publishing each new version of the website to running a single script just once! And the script itself can be written and maintained even by a person with no prior DevOps experience. This sounds amazing and it is very convenient for such projects as personal blogs etc.</p>
<p>To give the full picture here are checkpoints to deploy your own website right now:</p>
<ol type="1">
<li>Get yourself the repo at GitHub called <code>yourUserName.github.io</code>.</li>
<li>Create two branches:
<ul>
<li><code>develop</code> – this is where all your code will go while you’re working</li>
<li><code>main</code> – this is where the generated code for the website should go, so GitHub can deploy it.</li>
</ul></li>
<li>Get your Hakyll website working as you want website to look like.</li>
<li>Commit.</li>
<li>Run the deployment script: <code>./scripts/deploy.hs “Initial creation”</code>.</li>
</ol>
<p>Speaking about the deployment script, there is no magic in there. It’s a simple bash file which runs <code>Hakyll</code> executable to generate site content and commits it to the <code>main</code> branch. You can see how it’s implemented in here:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="co">#!/usr/bin/env bash</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a><span class="kw">set</span> <span class="ex">-eo</span> pipefail</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a><span class="co"># Clean rebuild</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a><span class="ex">cabal</span> new-exec site rebuild</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a><span class="co"># Create deploy environment inside of .deploy directory</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a><span class="fu">mkdir</span> .deploy</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true"></a><span class="bu">cd</span> .deploy</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true"></a><span class="fu">git</span> init --initial-branch=main</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true"></a><span class="fu">git</span> remote add origin git@github.com:vrom911/vrom911.github.io.git</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true"></a><span class="fu">git</span> pull -r origin main</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true"></a><span class="co"># Add built site files</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true"></a><span class="fu">rsync</span> -a ../_site/ .</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true"></a><span class="fu">git</span> add .</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true"></a><span class="fu">git</span> commit -m <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true"></a><span class="fu">git</span> push origin main</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true"></a></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true"></a><span class="co"># Cleanup .deploy directory after a successful push</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true"></a><span class="bu">cd</span> ..</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true"></a><span class="fu">rm</span> -rf .deploy</span></code></pre></div>
<h2 id="conclusion">Conclusion</h2>
<p>To summarize my experience with the personal website creation: well, the resulting product is not perfect, the development process is very hard, and the webpage doesn’t look like the ideal one in the end and maybe some people would hate it very badly, but these aspects are not the points of my writing. I intended to show that the person knowing so little can achieve the complete result and make stuff work the way one wants it to. So, do not wait for your dream webpage, go and make one!</p> </p> </div>
          </div>
        </div>
    </section>
    <!-- Bootstrap core JavaScript -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"> </script>
    <script src="../js/post.js"> </script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/haskell.min.js"></script>
    <script>hljs.initHighlightingOnLoad()</script>
  </body>
</html>
